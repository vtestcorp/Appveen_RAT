{
    "testName": "Create Super admin ,App and app admin ",
    "url": [
        "https://biforst.ds.appveen.com/api"
    ],
    "modules": [],
    "globals": ["loginResponse", "createGroupResponse", "groupResponse"],
    "tests": [{
            "endpoint": "1",
            "name": "Login as superAdmin",
            "request": {
                "method": "POST",
                "url": "/a/rbac/login",
                "payload": {
                    "username": "PreetiTester@appveen.com",
                    "password": "Test@12345"
                },
                "wait": 5,
                "responseCode": 200,
                "saveResponse": "loginResponse"
            }
        }, {
            "endpoint": "1",
            "name": "Create a superAdmin",
            "request": {
                "method": "POST",
                "url": "/a/rbac/usr",
                "payload": {
                    "auth": {
                        "authType": "local"
                    },
                    "username": "PreetiTester@appveen.com",
                    "password": "Test@12345",
                    "cpassword": "Test@12345",
                    "isSuperAdmin": true,
                    "attributes": {},
                    "basicDetails": {
                        "name": "PreetiTester",
                        "phone": null,
                        "alternateEmail": "PreetiTester@appveen.com",
                        "description": null
                    },
                    "accessControl": {
                        "accessLevel": "Selected",
                        "apps": []
                    },
                    "roles": null
                },
                "headers": {
                    "Authorization": "JWT {{loginResponse.token}}",
                    "content-type": "application/json"
                },
                "wait": 5,
                "responseCode": 200
            }
        }, {
            "endpoint": "1",
            "name": "Create an app",
            "request": {
                "method": "POST",
                "url": "/a/rbac/app",
                "payload": {
                    "_id": "TEST-API1"
                },
                "headers": {
                    "Authorization": "JWT {{loginResponse.token}}",
                    "content-type": "application/json"
                },
                "wait": 10,
                "responseCode": 200
            }
        },
        {
            "endpoint": "1",
            "name": "Create a user",
            "request": {
                "method": "POST",
                "url": "/a/rbac/usr/app/TEST-API1/create",
                "payload": {
                    "user": {
                        "username": "test_appadmin@appveen.com",
                        "password": "Test@12345",
                        "cpassword": "Test@12345",
                        "isSuperAdmin": true,
                        "attributes": {},
                        "basicDetails": {
                            "name": "test_appadmin@appveen.com",
                            "phone": "9999999991"
                        },
                        "accessControl": {
                            "accessLevel": "Selected",
                            "apps": ["TEST-API1"]
                        },
                        "roles": null
                    },
                    "groups": []
                },
                "headers": {
                    "Authorization": "JWT {{loginResponse.token}}",
                    "content-type": "application/json"
                },
                "wait": 10,
                "responseCode": 200
            }
        }, {
            "endpoint": "1",
            "name": "Make user app admin",
            "request": {
                "method": "PUT",
                "url": "/a/rbac/usr/test_appadmin@appveen.com/appAdmin/grant",
                "payload": {
                    "apps": ["TEST-API1"]
                },
                "headers": {
                    "Authorization": "JWT {{loginResponse.token}}",
                    "content-type": "application/json"
                },
                "wait": 7,
                "responseCode": 200
            }
        }
    ]
}